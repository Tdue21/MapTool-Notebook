<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" type="text/css" href="../css/Elegant.css?cachelib=false">
        <script src="../javascript/maptool.js?cachelib=false"></script>
        <style type="text/css">
            td:first-child {
                width:35%;
            }
            tr, td {
                margin:0px;
                padding:0px;
            }
            tr:nth-child(even) {
                background-color: #efefef;
            }
            button {
                width: 100px;
            }
        </style>
    </head>

    <body>
        <form id="setup" name="setup" action="macro://ProcessSetup@lib:net.dovesoft.notebook/none/impersonated?" method="post">
            <table style="border-collapse: collapse;">
                <tr>
                    <td><label for="defaultTheme">Default Theme</label></td>
                    <td><select id="defaultTheme" name="defaultTheme"></select></td>
                </tr>

                <tr>
                    <td><label for="pcOutput">PC Output</label></td>
                    <td><select id="pcOutput" name="pcOutput">
                        <option selected>all</option>
                        <option>self</option>
                        <option>gm</option>
                        <option>gm-self</option>
                        <option>none</option>
                    </select></td>
                </tr>

                <tr>
                    <td><label for="gmOutput">GM Output</label></td>
                    <td><select id="gmOutput" name="gmOutput">
                        <option>all</option>
                        <option selected>self</option>
                        <option>gm</option>
                        <option>gm-self</option>
                        <option>none</option>
                    </select></td>
                </tr>

                <tr>
                    <td><label for="diceSize">Dice Size</label></td>
                    <td><input type="text" id="diceSize" name="diceSize" value="100"></td>
                </tr>

                <tr>
                    <td><label for="search">Search Engine</label></td>
                    <td><input type="text" id="search" name="search" value="https://www.dndbeyond.com/search?q="></td>
                </tr>

                <tr>
                    <td><label for="pcAudio">PC Audio Output</label></td>
                    <td><select id="pcAudio" name="pcAudio">
                        <option selected>all</option>
                        <option>self</option>
                        <option>gm</option>
                        <option>gm-self</option>
                        <option>none</option>
                    </select></td>
                </tr>

                <tr>
                    <td><label for="gmAudio">GM Audio Output</label></td>
                    <td><select id="gmAudio" name="gmAudio">
                        <option>all</option>
                        <option selected>self</option>
                        <option>gm</option>
                        <option>gm-self</option>
                        <option>none</option>
                    </select></td>
                </tr>

                <tr>
                    <td><label for="audioClips">Audio Clips URL list</label></td>
                    <td><textarea id="audioClips" name="audioClips"></textarea></td>
                </tr>

                <tr>
                    <td><label for="loadOnStart">Load on Startup</label></td>
                    <td><input type="checkbox" id="loadOnStart" name="loadOnStart" value="1"></td>
                </tr>

                <tr>
                    <td colspan="2" style="text-align: right;">
                        <button type="submit" id="submit" name="submit" value="ok">Ok</button>
                        <button type="submit" id="reset" name="reset"" value="cancel">Cancel</button>
                    </td>
                </tr>
            </table>
        </form>

        <script>
            (async () => {
                let data = await fetchSetupData()
                for(let key in data) {
                    if(data.hasOwnProperty(key)) {
                        let element = document.getElementById(key)
                        if(element.getAttribute("type") === "checkbox") {
                            element.checked = data[key] === "1"
                        } else {
                            element.value = data[key]
                        }
                    }
                }
        })();
        </script>
    </body>
</html>